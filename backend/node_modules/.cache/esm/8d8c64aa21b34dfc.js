let TEAM_MEMBER,remove_image,save_image;_21b‍.x([["add_team_member",()=>add_team_member],["update_team_member",()=>update_team_member],["team_members",()=>team_members],["remove_team_member",()=>remove_team_member]]);_21b‍.w("../ds/conn",[["TEAM_MEMBER",["TEAM_MEMBER"],function(v){TEAM_MEMBER=v}]]);_21b‍.w("./utils",[["remove_image",["remove_image"],function(v){remove_image=v}],["save_image",["save_image"],function(v){save_image=v}]]);


const add_team_member = (req, res) => {
  let data = req.body;

  data.image = save_image(data.image);

  let result = TEAM_MEMBER.write(data);

  res.json({
    ok: true,
    data: {
      _id: result._id,
      image: data.image,
      created: result.created,
    },
  });
};

const update_team_member = (req, res) => {
  let data = req.body;

  data.image = save_image(data.image);

  let result = TEAM_MEMBER.update(data._id, { ...data });

  res.json({
    ok: true,
    data: {
      _id: result._id,
      image: data.image,
      created: result.created,
    },
  });
};

const team_members = (req, res) => {
  res.json({ ok: true, data: TEAM_MEMBER.read() });
};

const remove_team_member = (req, res) => {
  let { member } = req.params;

  let result = TEAM_MEMBER.remove(member);
  result && remove_image(result.image);

  res.end();
};







